/**
 * jQuery simplebox v2.0.2
 * Copyright (c) 2013 JetCoders
 * email: yuriy.shpak@jetcoders.com
 * www: JetCoders.com
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 **/

;(function(e){var t=function(t,n){if(e.simplebox.modal){var i=e.simplebox.modal.data("simplebox");i.onClose(e.simplebox.modal);e.simplebox.modal.fadeOut(i.duration,function(){e.simplebox.modal.css({left:"-9999px",top:"-9999px"}).show();i.afterClose(e.simplebox.modal);e.simplebox.modal.removeData("simplebox");e.simplebox.modal=false;r(t,n)})}else r(t,n)},n=function(){return e(document).width()>e("body").width()?e(document).width():jQuery("body").width()},r=function(t,r){e.simplebox.modal=e(t);e.simplebox.modal.data("simplebox",r);var o=e.simplebox.modal.data("simplebox");o.btnClose=e.simplebox.modal.find(o.linkClose);var u=e(window).scrollTop()+e(window).height()/2-e.simplebox.modal.outerHeight(true)/2;if(e(window).scrollTop()>u)u=e(window).scrollTop();if(u+e.simplebox.modal.outerHeight(true)>e(document).height())u=e(document).height()-e.simplebox.modal.outerHeight(true);if(u<0)u=0;if(!o.positionFrom){e.simplebox.modal.css({zIndex:1e3,top:u,left:n()/2-e.simplebox.modal.outerWidth(true)/2}).hide()}else{e.simplebox.modal.css({zIndex:1e3,top:e(o.positionFrom).offset().top+e(o.positionFrom).outerHeight(true),left:e(o.positionFrom).offset().left}).hide()}i(o);s(o,o.btnClose);if(o.overlay.closeClick)s(o,e.simplebox.overlay)},i=function(t){t.onOpen(e.simplebox.modal);if(t.overlay){e.simplebox.overlay.css({background:t.overlay.color,opacity:t.overlay.opacity}).fadeIn(t.duration,function(){e.simplebox.modal.fadeIn(t.duration,function(){e.simplebox.busy=false;t.afterOpen(e.simplebox.modal);if(e(window).scrollTop()>e.simplebox.modal.offset().top)e("html, body").animate({scrollTop:e.simplebox.modal.offset().top},500)})})}else{e.simplebox.overlay.fadeOut(t.duration);e.simplebox.modal.fadeIn(t.duration,function(){e.simplebox.busy=false;t.afterOpen(e.simplebox.modal);if(e(window).scrollTop()>e.simplebox.modal.offset().top)e("html, body").animate({scrollTop:e.simplebox.modal.offset().top},500)})}},s=function(t,n){n.unbind("click.simplebox").bind("click.simplebox",function(){if(!e.simplebox.busy){e.simplebox.busy=true;t.onClose(e.simplebox.modal);e.simplebox.modal.fadeOut(t.duration,function(){e.simplebox.modal.css({left:"-9999px",top:"-9999px"}).show();e.simplebox.overlay.fadeOut(t.duration,function(){t.afterClose(e.simplebox.modal);e.simplebox.modal.removeData("simplebox");e.simplebox.modal=false;e.simplebox.busy=false})})}return false})},o={init:function(n){e(this).unbind("click.simplebox").bind("click.simplebox",function(){var r=e(this).data("simplebox");if(!e(this).hasClass(u.disableClass)&&!e.simplebox.busy){e.simplebox.busy=true;t(e(this).attr("href")?e(this).attr("href"):e(this).data("href"),jQuery.extend(true,{},u,n))}return false});return this},option:function(t,n){if(n){return this.each(function(){var r=e(this).data("simplebox");if(r)r[t]=n})}else{var r=[];this.each(function(){var n=e(this).data("simplebox");if(n)r.push(n[t])});if(r.length>1)return r;else return r[0]}}},u={duration:300,linkClose:".close, a.btn-close",disableClass:"disabled",overlay:{box:"simplebox-overlay",color:"black",closeClick:true,opacity:.3},positionFrom:false,onOpen:function(){},afterOpen:function(){},onClose:function(){},afterClose:function(){}};e.fn.simplebox=function(t){if(o[t]){return o[t].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof t==="object"||!t){return o.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.simplebox")}}};e.simplebox=function(n,r){if(!e.simplebox.busy){e.simplebox.busy=true;t(n,jQuery.extend(true,{},u,r))}};e.simplebox.init=function(){if(!e.simplebox.overlay){e.simplebox.overlay=jQuery('<div class="'+u.overlay.box+'"></div>');jQuery("body").append(e.simplebox.overlay);e.simplebox.overlay.css({position:"fixed",zIndex:999,left:0,top:0,width:"100%",height:"100%",background:u.overlay.color,opacity:u.overlay.opacity}).hide()}e(window).bind("resize.simplebox",function(){if(e.simplebox.modal&&e.simplebox.modal.is(":visible")){var t=e.simplebox.modal.data("simplebox");if(!t.positionFrom){e.simplebox.modal.animate({left:n()/2-e.simplebox.modal.outerWidth(true)/2},{queue:false,duration:e.simplebox.modal.data("simplebox").duration})}else{e.simplebox.modal.animate({top:e(t.positionFrom).offset().top+e(t.positionFrom).outerHeight(true),left:e(t.positionFrom).offset().left},{queue:false,duration:e.simplebox.modal.data("simplebox").duration})}}})};e.simplebox.close=function(){if(e.simplebox.modal&&!e.simplebox.busy){var t=e.simplebox.modal.data("simplebox");e.simplebox.busy=true;t.onClose(e.simplebox.modal);e.simplebox.modal.fadeOut(t.duration,function(){e.simplebox.modal.css({left:"-9999px",top:"-9999px"}).show();if(e.simplebox.overlay)e.simplebox.overlay.fadeOut(t.duration,function(){t.afterClose(e.simplebox.modal);e.simplebox.modal.removeData("simplebox");e.simplebox.modal=false;e.simplebox.busy=false});else{t.afterClose(e.simplebox.modal);e.simplebox.modal.removeData("simplebox");e.simplebox.modal=false;e.simplebox.busy=false}})}};e(document).ready(function(){e.simplebox.init()})})(jQuery);
